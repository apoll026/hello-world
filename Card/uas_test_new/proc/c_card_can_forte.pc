/**********************************************************/
/* 화  일  명 : c_card_can_forte.pc                     */
/* 작  성  일 : 2001.06.12                                */
/* 최종수정일 :                                           */
/**********************************************************/
/* 내      용 : 구매카드 결과 --> jatb101, jatb204 update */
/* 사용 TABLE :                                           */
/* 사용MODULE :                                           */
/* PARAMETER  :  forte에서 실행하는걸루 변경              */
/**********************************************************/
#include <stdio.h>
#include <ctype.h>
#include <string.h>
#include <stdlib.h>
char *getenv();

#define VCHINIT(vchar) memset(&(vchar),0x00,sizeof((vchar)))
#define SQLCODE      sqlca.sqlcode
#define SUCCESS      0
#define FAILURE      -1
#define SQL_OK       0
#define SQL_NO_DATA  1403

typedef int bool;
typedef char asciiz[100];

int l_can_update();       /* LG캐피탈 */
int s_can_update();       /* 신한은행 */
int k_can_update();       /* 국민은행 */
int n_can_update();       /* 농협 */
int w_can_update();       /* 우리은행 */
int j_can_update();       /* 제일은행 */
int c_can_update();       /*조흥은행*/


/* host variable definition */
EXEC SQL BEGIN DECLARE SECTION;
EXEC SQL TYPE asciiz IS STRING(100) REFERENCE;
char    *uid = "ja/j7bhjd2@DBSTD99";	
static char chck[3];
static asciiz hv_card_num;
static asciiz hv_can_num;
static asciiz hv_err_code;
static char hv_can_date[8+1];
static char hv_appr_num[10+1];
static char hv_dmnd_amt[11+1];

EXEC SQL END DECLARE SECTION;

EXEC SQL INCLUDE sqlca.h;

FILE *fp;

char buffer[500 + 1];
char card_bank[1 + 1];

int main( int agrc, char **agrv )
{
   strcpy(card_bank,agrv[1]);

   if (agrc == 3)
   {
      strcpy(hv_can_date,agrv[2]);
   }

   if ( strlen(hv_can_date) == 0 )
   {
       EXEC SQL
            SELECT TO_CHAR(SYSDATE,'YYYYMMDD')
            INTO   :hv_can_date
            FROM   DUAL;
   }
   
   /* DB connetion */
   EXEC SQL CONNECT :uid;

   if (strncmp(card_bank, "L", 1) == 0 )
   {
       if ( l_can_update() == FAILURE )
       {
           printf("LG캐피탈 결과 파일 update 실패\n");
           return FAILURE;
       }
       else
           printf("LG캐피탈 결과 파일 update 성공\n");
   }
   else if (strncmp(card_bank, "S", 1) == 0 )
   {
       if ( s_can_update() == FAILURE )
       {
           printf("신한은행 결과 파일 update 실패\n");
           return FAILURE;
       }
       else
           printf("신한은행 결과 파일 update 성공\n");
   }
   else if (strncmp(card_bank, "K", 1) == 0 )
   {
       if ( k_can_update() == FAILURE )
       {
           printf("국민은행 결과 파일 update 실패\n");
           return FAILURE;
       }
       else
           printf("국민은행 결과 파일 update 성공\n");
   }
   else if (strncmp(card_bank, "N", 1) == 0 )
   {
       if ( n_can_update() == FAILURE )
       {
           printf("농협 결과 파일 update 실패\n");
           return FAILURE;
       }
       else
           printf("농협 결과 파일 update 성공\n");
   }

   else if (strncmp(card_bank, "W", 1) == 0 )
   {
       if ( w_can_update() == FAILURE )
       {
           printf("우리은행 결과 파일 update 실패\n");
           return FAILURE;
       }
       else
           printf("우리은행 결과 파일 update 성공\n");
   }

   else if (strncmp(card_bank, "J", 1) == 0 )
   {
       if ( j_can_update() == FAILURE )
       {
           printf("제일은행 결과 파일 update 실패\n");
           return FAILURE;
       }
       else
           printf("제일은행 결과 파일 update 성공\n");
   }

   else if (strncmp(card_bank, "G", 1) == 0 )
   {
       if ( giup_can_update() == FAILURE )
       {
           printf("기업은행 결과 파일 update 실패\n");
           return FAILURE;
       }
       else
           printf("기업은행 결과 파일 update 성공\n");
   }
   else if (strncmp(card_bank, "C", 1) == 0 )
   {
       if ( c_can_update() == FAILURE )
       {
           printf("조흥은행 결과 파일 update 실패\n");
           return FAILURE;
       }
       else
           printf("조흥은행 결과 파일 update 성공\n");
   }


   EXEC SQL COMMIT WORK;
   return SUCCESS;
}

/* LG캐피탈 결과 파일 update */
int l_can_update()
{
    int inx = 0;
    int znx = 0;
    int ii;

    puts("LG캐피탈 결과 파일 update");
    if (( fp=fopen( "/app/fund/fb/forte_edi/card_resu/rlgc_cancel.dat","r" )) != NULL )
    {
       EXEC SQL DECLARE LG_CUR CURSOR FOR
                SELECT NVL(CHCK_DRFT_NUM, '')
                  FROM JATB106
                WHERE  DRFT_ISSU_DATE = :hv_can_date
                  AND  CARD_BANK     = 'L'
                 ORDER BY CHCK_DRFT_NUM;

    EXEC SQL OPEN LG_CUR;

       for (ii=0;;ii++)
       {
           EXEC SQL
           FETCH LG_CUR INTO
               :hv_card_num;

           if(SQLCODE == SQL_NO_DATA)
           {
               EXEC SQL CLOSE LG_CUR;
               break;
           }
           else if(SQLCODE != SQL_OK)
           {
               printf("JATB106 LG카드 정보 조회ERROR :%d\n",sqlca.sqlcode);
               EXEC SQL CLOSE LG_CUR;
               EXEC SQL ROLLBACK WORK;
               return FAILURE;
           }
           znx = znx + 1; 
           EXEC SQL
              UPDATE JATB106
                SET  SEQ     = :znx
             WHERE CHCK_DRFT_NUM = :hv_card_num
               AND  DRFT_ISSU_DATE = :hv_can_date
               AND  CARD_BANK     = 'L'; 
                if(SQLCODE == SQL_NO_DATA)
                {
                    printf("LG카드 SEQ 몇번째: %d Jatb106 Update error : %d\n",
                            znx, sqlca.sqlcode);
                    close(fp);
                    EXEC SQL ROLLBACK WORK;
                    return FAILURE;

                }
                else if(SQLCODE != SQL_OK)
                {    
                    printf("LG카드 SEQ 몇번째: %d Jatb106 Update error : %d\n",
                            znx, sqlca.sqlcode);
                    close(fp);
                    EXEC SQL ROLLBACK WORK;
                    return FAILURE;
                }

       }

        while ( fgets( buffer,500,fp ) != NULL )
        {
            strncpy(chck,&buffer[0],1);
            if (strncmp(chck, "D", 1) == 0)
            {
                strncpy(hv_dmnd_amt, &buffer[57],11);
                strncpy(hv_err_code, &buffer[53],4);
                puts(hv_dmnd_amt);
                puts(hv_err_code);

                inx = inx + 1; 

                EXEC SQL
                   SELECT substr(:hv_can_date,4,5)||LPAD(TO_CHAR(NVL(:inx, 0)),5,'0')
                      INTO   :hv_appr_num
                      FROM dual;

                printf("[LG캐피탈] %dth Data 카드번호 : %s 결과 처리중...\n", inx, hv_card_num);
                EXEC SQL
                        UPDATE JATB106
                        SET    APPR_NUM      = NVL(:hv_appr_num,'0000000000') 
                        ,      CARD_ERR_CODE = :hv_err_code
                        ,      APPR_DATE      = :hv_can_date
                        WHERE  DRFT_ISSU_DATE = :hv_can_date
                          AND  CARD_BANK     = 'L'
                          AND  SEQ           = :inx;

                if(SQLCODE == SQL_NO_DATA)
                {
                    printf("LG카드  몇번째: %d Jatb106 Update error : %d\n",
                            inx, sqlca.sqlcode);
                    close(fp);
                    EXEC SQL ROLLBACK WORK;
                    return FAILURE;

                }
                else if(SQLCODE != SQL_OK)
                {    
                    printf("LG카드 몇번째: %d Jatb106 Update error : %d\n",
                            inx, sqlca.sqlcode);
                    close(fp);
                    EXEC SQL ROLLBACK WORK;
                    return FAILURE;
                }

            }
        }
        system("sh /app/fund/fb/reg_fund/card/lcancel_back.sh");
        system("sh /app/fund/fb/forte_edi/card_resu/lgc_cancel_return_back.sh");
    }
    else 
    {
        printf("File Open Error : rlgc.dat\n");
        return FAILURE;
    }

    return SUCCESS;
}
/* 신한은행 결과 파일 update */
int s_can_update()
{
    int inx = 0;

    puts("신한은행 결과 파일 update");
    if (( fp=fopen( "/app/fund/fb/forte_edi/card_resu/rshb_cancel.dat","r" )) != NULL )
    {
        while ( fgets( buffer,500,fp ) != NULL )
        {
            strncpy(chck,&buffer[0],2);
            if (strncmp(chck, "20", 2) == 0)
            {
                strncpy(hv_card_num, &buffer[18],8);
                strncpy(hv_err_code, &buffer[170],4);

  
                puts(hv_card_num);
                puts(hv_err_code);

                inx = inx + 1; 
                EXEC SQL
                   SELECT substr(:hv_can_date,4,5)||LPAD(TO_CHAR(NVL(:inx, 0)),5,'0')
                      INTO   :hv_appr_num
                      FROM dual;

                printf("[신한은행] %dth Data 카드번호 : %s 결과 처리중...\n", inx, hv_card_num);

                EXEC SQL
                        UPDATE JATB106
                        SET    APPR_NUM      = :hv_appr_num
                        ,      CARD_ERR_CODE = :hv_err_code
                        ,      APPR_DATE      = :hv_can_date
                        WHERE  CHCK_DRFT_NUM = :hv_card_num
                          AND  DRFT_ISSU_DATE = :hv_can_date
                          AND  CARD_BANK     = 'S';

                if(SQLCODE == SQL_NO_DATA)
                {
                    printf("신한은행 어음번호 : %s Jatb106 Update error : %d\n",
                          hv_card_num, sqlca.sqlcode);
                    close(fp);
                    EXEC SQL ROLLBACK WORK;
                    return FAILURE;
                }
                else if(SQLCODE != SQL_OK)
                {    
                    printf("신한은행 어음번호 : %s Jatb106 Update error : %d\n",
                            hv_card_num, sqlca.sqlcode);
                    close(fp);
                    EXEC SQL ROLLBACK WORK;
                    return FAILURE;
                }

            }
        }
        system("sh /app/fund/fb/reg_fund/card/scancel_back.sh");
        system("sh /app/fund/fb/forte_edi/card_resu/shb_cancel_return_back.sh");
    }
    else 
    {
        printf("File Open Error : rshb_cancel.dat\n");
        return FAILURE;
    }

    return SUCCESS;
}

/* 국민은행 결과 파일 update */
int k_can_update()
{
    int inx = 0;

    puts("국민은행 결과 파일 update");
    if (( fp=fopen( "/app/fund/fb/forte_edi/card_resu/rkmb_cancel.dat","r" )) != NULL )
    {
        printf("appr_date : %s\n", hv_can_date);

        while ( fgets( buffer,500,fp ) != NULL )
        {
            strncpy(chck,&buffer[0],2);
            if (strncmp(chck, "2D", 2) == 0)
            {
                strncpy(hv_card_num, &buffer[71],8);
             /**  strncpy(hv_can_num, &buffer[91],6);  **/
                strncpy(hv_err_code, &buffer[99],3);
                puts(hv_card_num);
                puts(hv_err_code);

                inx = inx + 1; 
                EXEC SQL
                   SELECT substr(:hv_can_date,4,5)||LPAD(TO_CHAR(NVL(:inx, 0)),5,'0')
                      INTO   :hv_appr_num
                      FROM dual;
                printf("[국민은행] %dth Data 카드번호 : %s 결과 처리중...\n", inx, hv_card_num);

                EXEC SQL
                        UPDATE JATB106
                        SET    APPR_NUM      = :hv_appr_num
                        ,      CARD_ERR_CODE = :hv_err_code
                        ,      APPR_DATE     = NVL( :hv_can_date , TO_CHAR(SYSDATE,'YYYYMMDD') )
                        WHERE  CHCK_DRFT_NUM = :hv_card_num
                    /**      AND  DRFT_ISSU_DATE = :hv_can_date  **/
                          AND  CARD_BANK     = 'K';

                if(SQLCODE == SQL_NO_DATA)
                {
                   printf("국민은행 어음번호 : %s JATB106 Update error(NO_DATA) : %d\n",
                          hv_card_num, sqlca.sqlcode);
                   close(fp);
                   EXEC SQL ROLLBACK WORK;
                   return FAILURE;
                }
                else if(SQLCODE != SQL_OK)
                {    
                    printf("국민은행 어음번호 : %s JATB106 Update error : %d\n",
                            hv_card_num, sqlca.sqlcode);
                    close(fp);
                    EXEC SQL ROLLBACK WORK;
                    return FAILURE;
                }

            }
        }
        system("sh /app/fund/fb/reg_fund/card/kmb_cancel_back.sh");
        system("sh /app/fund/fb/forte_edi/card_resu/kmb_cancel_return_back.sh");
    }
    else 
    {
        printf("File Open Error : rkmb_cancel.dat\n");
        return FAILURE;
    }

    return SUCCESS;
}

/* 농협 결과 파일 update */
int n_can_update()
{
    int inx = 0;

    puts("농협 결과 파일 update");
    if (( fp=fopen( "/app/fund/fb/forte_edi/card_resu/rnhc_cancel.dat","r" )) != NULL )
    {
        while ( fgets( buffer,500,fp ) != NULL )
        {
            strncpy(chck,&buffer[0],2);
            if (strncmp(chck, "2B", 2) == 0)
            {
                strncpy(hv_card_num, &buffer[133],8);
                strncpy(hv_can_num, &buffer[173],8);
                strncpy(hv_err_code, &buffer[197],3);
                puts(hv_card_num);
                puts(hv_can_num);
                puts(hv_err_code);

                inx = inx + 1; 
                EXEC SQL
                   SELECT substr(:hv_can_date,4,5)||LPAD(TO_CHAR(NVL(:inx, 0)),5,'0')
                      INTO   :hv_appr_num
                      FROM dual;
                printf("[농협] %dth Data 카드번호 : %s 결과 처리중...\n", inx, hv_card_num);

                EXEC SQL
                        UPDATE JATB106
                        SET    APPR_NUM      = :hv_appr_num
                        ,      CARD_ERR_CODE = :hv_err_code
                        ,      APPR_DATE      = :hv_can_date
                        WHERE  CHCK_DRFT_NUM = :hv_card_num
                          AND  DRFT_ISSU_DATE = :hv_can_date
                          AND  CARD_BANK     = 'N';

                if(SQLCODE == SQL_NO_DATA)
                {
                   printf("농협 어음번호 : %s Jatb106 Update error : %d\n",
                       hv_card_num, sqlca.sqlcode);
                   close(fp);
                   EXEC SQL ROLLBACK WORK;
                   return FAILURE;
                }
                else if(SQLCODE != SQL_OK)
                {    
                    printf("농협 어음번호 : %s Jatb106 Update error : %d\n",
                            hv_card_num, sqlca.sqlcode);
                    close(fp);
                    EXEC SQL ROLLBACK WORK;
                    return FAILURE;
                }

            }
        }
        system("sh /app/fund/fb/reg_fund/card/ncancel_back.sh");
        system("sh /app/fund/fb/forte_edi/card_resu/nhc_cancel_return_back.sh");
    }
    else 
    {
        printf("File Open Error : rnhc_cancel.dat\n");
        return FAILURE;
    }

    return SUCCESS;
}

/* 우리은행 결과 파일 update */
int w_can_update()
{
    int inx = 0;

    puts("우리은행 결과 파일 update");
    if (( fp=fopen( "/app/fund/fb/forte_edi/card_resu/rwbc_cancel.dat","r" )) != NULL )
    {
        while ( fgets( buffer,500,fp ) != NULL )
        {
            strncpy(chck,&buffer[0],2);
            if (strncmp(chck, "20", 2) == 0)
            {
                strncpy(hv_card_num, &buffer[10],8);
                strncpy(hv_err_code, &buffer[90],4);
                puts(hv_card_num);
                puts(hv_err_code);

                inx = inx + 1; 

                EXEC SQL
                   SELECT substr(:hv_can_date,4,5)||LPAD(TO_CHAR(NVL(:inx, 0)),5,'0')
                      INTO   :hv_appr_num
                      FROM dual;

                printf("[우리은행] %dth Data 카드번호 : %s 결과 처리중...\n", inx, hv_card_num);
                EXEC SQL
                        UPDATE JATB106
                        SET    APPR_NUM      = NVL(:hv_appr_num, '0000000000')
                        ,      CARD_ERR_CODE = :hv_err_code 
                        ,      APPR_DATE     = :hv_can_date
                        WHERE  CHCK_DRFT_NUM = :hv_card_num
                          AND  DRFT_ISSU_DATE = :hv_can_date
                          AND  CARD_BANK     = 'W';


                if(SQLCODE == SQL_NO_DATA)
                {
                   printf("우리은행 어음번호 : %s Jatb106 Update error : %d\n",
                            hv_card_num, sqlca.sqlcode);
                   close(fp);
                   EXEC SQL ROLLBACK WORK;
                   return FAILURE;
                }
                else if(SQLCODE != SQL_OK)
                {    
                    printf("우리은행 어음번호 : %s Jatb106 Update error : %d\n",
                            hv_card_num, sqlca.sqlcode);
                    close(fp);
                    EXEC SQL ROLLBACK WORK;
                    return FAILURE;
                }

            }
        }
        system("sh /app/fund/fb/reg_fund/card/wcancel_back.sh");
        system("sh /app/fund/fb/forte_edi/card_resu/wbc_cancel_return_back.sh");
    }
    else 
    {
        printf("File Open Error : rwbc_cancel.dat\n");
        return FAILURE;
    }

    return SUCCESS;
}

/* 제일은행 결과 파일 update */
int j_can_update()
{
    int inx = 0;

    puts("제일 결과 파일 update");
    if (( fp=fopen( "/app/fund/fb/forte_edi/card_resu/rjib_cancel.dat","r" )) != NULL )
    {
        while ( fgets( buffer,500,fp ) != NULL )
        {
            strncpy(chck,&buffer[0],1);
            if (strncmp(chck, "D", 1) == 0)
            {
                strncpy(hv_card_num, &buffer[109],8);
                strncpy(hv_appr_num, &buffer[163],10);
                strncpy(hv_err_code, &buffer[159],4);
                puts(hv_appr_num);
                puts(hv_can_num);
                puts(hv_err_code);

                inx = inx + 1; 
                printf("[제일은행] %dth Data 카드번호 : %s 결과 처리중...\n", inx, hv_card_num);

                EXEC SQL
                        UPDATE JATB106
                        SET    APPR_NUM      = :hv_appr_num
                        ,      CARD_ERR_CODE = :hv_err_code
                        ,      APPR_DATE      = :hv_can_date
                        WHERE  CHCK_DRFT_NUM = :hv_card_num
                          AND  DRFT_ISSU_DATE = :hv_can_date
                          AND  CARD_BANK     = 'J';

                if(SQLCODE == SQL_NO_DATA)
                {
                   printf("제일은행 구매카드번호 : %s Jatb106 Update error : %d\n",
                       hv_card_num, sqlca.sqlcode);
                   close(fp);
                   EXEC SQL ROLLBACK WORK;
                   return FAILURE;
                }
                else if(SQLCODE != SQL_OK)
                {    
                    printf("제일은행 구매카드번호 : %s Jatb106 Update error : %d\n",
                            hv_card_num, sqlca.sqlcode);
                    close(fp);
                    EXEC SQL ROLLBACK WORK;
                    return FAILURE;
                }

            }
        }
        system("sh /app/fund/fb/reg_fund/card/jcancel_back.sh");
        system("sh /app/fund/fb/forte_edi/card_resu/jib_cancel_return_back.sh");
    }
    else 
    {
        printf("File Open Error : rjib_cancel.dat\n");
        return FAILURE;
    }

    return SUCCESS;
}

/* 기업은행 결과 파일 update */
int giup_can_update()
{
    int inx = 0;

    puts("기업은행 결과 파일 update");
    if (( fp=fopen( "/app/fund/fb/forte_edi/card_resu/rgiup_cancel.dat","r" )) != NULL )
    {
        while ( fgets( buffer,500,fp ) != NULL )
        {
            strncpy(chck,&buffer[0],2);
            if (strncmp(chck, "2D", 2) == 0)
            {
                strncpy(hv_card_num, &buffer[71],12);
                strncpy(hv_err_code, &buffer[99],3);

  
                puts(hv_card_num);
                puts(hv_err_code);

                inx = inx + 1; 
                EXEC SQL
                   SELECT substr(:hv_can_date,4,5)||LPAD(TO_CHAR(NVL(:inx, 0)),5,'0')
                      INTO   :hv_appr_num
                      FROM dual;

                printf("[기업은행] %dth Data 카드번호 : %s 결과 처리중...\n", inx, hv_card_num);

                EXEC SQL
                        UPDATE JATB106
                        SET    APPR_NUM      = :hv_appr_num
                        ,      CARD_ERR_CODE = :hv_err_code
                        ,      APPR_DATE      = :hv_can_date
                        WHERE  CHCK_DRFT_NUM = TRIM(:hv_card_num)
                          AND  DRFT_ISSU_DATE = :hv_can_date
                          AND  CARD_BANK     = 'G';

                if(SQLCODE == SQL_NO_DATA)
                {
                    printf("기업은행 어음번호 : %s Jatb106 Update error : %d\n",
                          hv_card_num, sqlca.sqlcode);
                    close(fp);
                    EXEC SQL ROLLBACK WORK;
                    return FAILURE;
                }
                else if(SQLCODE != SQL_OK)
                {    
                    printf("기업은행 어음번호 : %s Jatb106 Update error : %d\n",
                            hv_card_num, sqlca.sqlcode);
                    close(fp);
                    EXEC SQL ROLLBACK WORK;
                    return FAILURE;
                }

            }
        }
        system("sh /app/fund/fb/reg_fund/card/scancel_back.sh");
        system("sh /app/fund/fb/forte_edi/card_resu/shb_cancel_return_back.sh");
    }
    else 
    {
        printf("File Open Error : rgiup_cancel.dat\n");
        return FAILURE;
    }

    return SUCCESS;
}

/* 조흥은행 결과 파일 update */
int c_can_update()
{
    int inx = 0;

    puts("조흥은행 결과 파일 update");
    if (( fp=fopen( "/app/fund/fb/forte_edi/card_resu/rchb_cancel.dat","r" )) != NULL )
    {
        while ( fgets( buffer,500,fp ) != NULL )
        {
            strncpy(chck,&buffer[5],1);
            if (strncmp(chck, "D", 1) == 0)
            {
                strncpy(hv_card_num, &buffer[100],20);  /*고객사용영역(카드번호)*/
                strncpy(hv_err_code, &buffer[83],4 );      /*응답코드*/
 	    strncpy(hv_appr_num, &buffer[100],20);
                 
                puts(hv_card_num);
                puts(hv_err_code);
                puts(hv_appr_num);

                inx = inx + 1; 
                EXEC SQL
                   SELECT substr(:hv_can_date,4,5)||LPAD(TO_CHAR(NVL(:inx, 0)),5,'0')
                      INTO   :hv_appr_num
                      FROM dual;

                printf("[조흥은행] %dth Data 카드번호 : %s 결과 처리중...\n", inx, hv_card_num);

                EXEC SQL
                        UPDATE JATB106
                        SET    APPR_NUM      = TRIM(:hv_appr_num)
                        ,      CARD_ERR_CODE = :hv_err_code
                        ,      APPR_DATE      = :hv_can_date
                        WHERE  CHCK_DRFT_NUM = TRIM(:hv_card_num)
                          AND  DRFT_ISSU_DATE = :hv_can_date
                          AND  CARD_BANK     = 'C';

                if(SQLCODE == SQL_NO_DATA)
                {
                    printf("조흥은행 어음번호 : %s Jatb106 Update error : %d\n",
                          hv_card_num, sqlca.sqlcode);
                    close(fp);
                    EXEC SQL ROLLBACK WORK;
                    return FAILURE;
                }
                else if(SQLCODE != SQL_OK)
                {    
                    printf("조흥은행 어음번호 : %s Jatb106 Update error : %d\n",
                            hv_card_num, sqlca.sqlcode);
                    close(fp);
                    EXEC SQL ROLLBACK WORK;
                    return FAILURE;
                }

            }
        }
        system("sh /app/fund/fb/reg_fund/card/ccancel_back.sh");
        system("sh /app/fund/fb/forte_edi/card_resu/chb_cancel_return_back.sh");
    }
    else 
    {
        printf("File Open Error : rchb_cancel.dat\n");
        return FAILURE;
    }

    return SUCCESS;
}



